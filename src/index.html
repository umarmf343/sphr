+178
-0

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; connect-src 'self' https://static.mused.org data: blob:; img-src 'self' data: blob: https://static.mused.org; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self' data:; media-src 'self' https://static.mused.org; frame-src 'self' https://static.mused.org; child-src 'self';"
    />
    <title>SPHR Demo</title>
  </head>
  <body class="bg-theme-900 text-white font-sans">
    <canvas class="webgl" aria-hidden="true"></canvas>

    <div id="loading-screen" class="fixed inset-0 flex flex-col justify-between pointer-events-none">
      <div id="title-outer" class="p-6 text-center pointer-events-auto">
        <h1 id="loading-title" class="text-2xl font-serif">Loading experience</h1>
        <h2 id="loading-title2" class="text-lg opacity-80"></h2>
        <p id="loading-subtitle" class="mt-2 text-sm opacity-70"></p>
      </div>
      <div id="loading-canvas" class="flex-1 pointer-events-auto"></div>
      <div class="p-6 space-y-4 pointer-events-auto">
        <div id="loading-text-notification" class="text-center text-sm tracking-widest uppercase">
          <span id="loading-text-notification-percent">0%</span>
        </div>
        <div id="loading-action-buttons" class="flex items-center justify-center gap-4">
          <button id="loading-audio-on-button" class="tour-action-button" type="button">Enable audio</button>
          <button id="loading-audio-mute-button" class="tour-action-button" type="button">Mute audio</button>
        </div>
      </div>
    </div>

    <div id="hud-container" class="pointer-events-none">
      <div class="absolute inset-x-0 bottom-0 p-6 flex flex-col gap-4 pointer-events-auto">
        <div id="tour-ui" class="hidden flex flex-col gap-4">
          <div id="tour-ui-buttons" class="flex flex-wrap gap-3 justify-center">
            <button id="prev-button" class="tour-action-button" type="button">Previous</button>
            <button id="next-button" class="tour-action-button" type="button">Next</button>
            <button id="view-mode-button" class="tour-action-button flex items-center gap-2" type="button">
              <span id="view-mode-fpv-icon">FPV</span>
              <span id="view-mode-orbit-icon" class="hidden">Orbit</span>
            </button>
            <button id="full-screen-button" class="tour-action-button flex items-center gap-2" type="button">
              <span id="full-screen-on">Fullscreen</span>
              <span id="full-screen-off" class="hidden">Exit</span>
            </button>
            <button id="audio-on-button" class="tour-action-button" type="button">ðŸ”Š</button>
            <button id="audio-mute-button" class="tour-action-button hidden" type="button">ðŸ”‡</button>
            <button id="guide-toggle-button" class="tour-action-button" type="button">Guide</button>
            <button id="free-explore-toggle-button" class="tour-action-button" type="button">Explore</button>
          </div>

          <div id="tour-ui-display" class="relative mx-auto w-full max-w-3xl rounded-lg bg-black/30 p-4">
            <div id="tour-ui-content" class="flex flex-col gap-3">
              <div id="tour-point-text" class="space-y-2">
                <div id="tour-point-text-main" class="space-y-2 text-base leading-relaxed"></div>
                <div id="tour-point-text-secondary" class="text-sm opacity-80"></div>
              </div>
              <div id="tour-ui-navpoint" class="flex flex-wrap gap-4 text-sm">
                <label class="flex items-center gap-2">
                  <input id="autoplay" type="checkbox" checked />
                  Autoplay narration
                </label>
                <label class="flex items-center gap-2">
                  <input id="words" type="checkbox" checked />
                  Show text overlay
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="debug-container" class="absolute top-4 left-4 text-xs bg-black/60 px-3 py-2 rounded pointer-events-auto"></div>
    </div>

    <div id="node-loading-screen" class="hidden"></div>
    <div id="tour-photograph-container" class="hidden"></div>
    <div id="maps-attribution" class="hidden"></div>

    <video id="narrator" class="hidden" crossorigin="anonymous"></video>
    <iframe id="mp-showcase" class="hidden"></iframe>

    <form id="space_edit_form" class="hidden" method="post">
      <input id="space_data_nodes" name="space_data_nodes" type="hidden" value="" />
    </form>
    <form id="tour_edit_form" class="hidden" method="post">
      <input id="tour_data_input" name="tour_data" type="hidden" value="" />
    </form>

    <script id="space_data" type="application/json">
      {
        "id": "sample-atrium",
        "type": "spaces",
        "title": "Sample Gallery Atrium",
        "mesh": null,
        "space_data": {
          "nodes": [
            {
              "uuid": "LOCAL_ATRIUM_ENTRANCE",
              "label": "Atrium Entrance",
              "image": "local/placeholder-panorama",
              "cubeMapFaces": [
                "/static/textures/placeholder-face0.png",
                "/static/textures/placeholder-face1.png",
                "/static/textures/placeholder-face2.png",
                "/static/textures/placeholder-face3.png",
                "/static/textures/placeholder-face4.png",
                "/static/textures/placeholder-face5.png"
              ],
              "index": 0,
              "position": { "x": 0, "y": 1.6, "z": 0 },
              "rotation": { "x": 0, "y": 0, "z": 0 },
              "resolution": "1024",
              "floorPosition": { "x": 0, "y": 0, "z": 0 }
            },
            {
              "uuid": "LOCAL_SCULPTURE_GALLERY",
              "label": "Sculpture Gallery",
              "image": "local/placeholder-panorama",
              "cubeMapFaces": [
                "/static/textures/placeholder-face0.png",
                "/static/textures/placeholder-face1.png",
                "/static/textures/placeholder-face2.png",
                "/static/textures/placeholder-face3.png",
                "/static/textures/placeholder-face4.png",
                "/static/textures/placeholder-face5.png"
              ],
              "index": 1,
              "position": { "x": 2.6, "y": 1.6, "z": -1.2 },
              "rotation": { "x": 0, "y": 1.2, "z": 0 },
              "resolution": "1024",
              "floorPosition": { "x": 2.6, "y": 0, "z": -1.2 }
            },
            {
              "uuid": "LOCAL_BALCONY_OUTLOOK",
              "label": "Balcony Outlook",
              "image": "local/placeholder-panorama",
              "cubeMapFaces": [
                "/static/textures/placeholder-face0.png",
                "/static/textures/placeholder-face1.png",
                "/static/textures/placeholder-face2.png",
                "/static/textures/placeholder-face3.png",
                "/static/textures/placeholder-face4.png",
                "/static/textures/placeholder-face5.png"
              ],
              "index": 2,
              "position": { "x": -2.4, "y": 2.1, "z": 1.4 },
              "rotation": { "x": 0, "y": -1.5, "z": 0 },
              "resolution": "1024",
              "floorPosition": { "x": -2.4, "y": 0, "z": 1.4 }
            }
          ],
          "initialNode": "LOCAL_ATRIUM_ENTRANCE",
          "sceneSettings": {
            "nodes": {
              "scale": 1,
              "offsetPosition": { "x": 0, "y": 0, "z": 0 },
              "offsetRotation": { "x": 0, "y": 0, "z": 0 }
            },
            "dollhouse": {
              "scale": 1,
              "offsetPosition": { "x": 0, "y": 0, "z": 0 },
              "offsetRotation": { "x": 0, "y": 0, "z": 0 }
            },
            "offsetPosition": { "x": 0, "y": 0, "z": 0 },
            "offsetRotation": { "x": 0, "y": 0, "z": 0 }
          },
          "initialRotation": { "polar": -10, "azimuth": 35 }
        }
      }
    </script>

    <script id="tour_data" type="application/json">
      {
        "tour_data": {
          "title": "Sample atrium tour",
          "autoplay": false,
          "defaultShowText": true,
          "audio": {
            "start": {
              "url": "https://static.mused.org/sounds/bassdrum_64k.mp3",
              "audio": null,
              "options": { "loop": false, "volume": 0.2, "autoplay": false }
            },
            "default": {
              "url": "https://static.mused.org/sounds/default_oud_96k.mp3",
              "audio": null,
              "options": { "loop": true, "volume": 0.25, "autoplay": true }
            },
            "navigate": {
              "url": "https://static.mused.org/sounds/bassdrum_64k.mp3",
              "audio": null,
              "options": { "loop": false, "volume": 0.15, "autoplay": false }
            }
          },
          "spaces": [
            {
              "id": "sample-atrium",
              "type": "spaces",
              "title": "Sample Gallery Atrium",
              "tourpoints": [
                {
                  "nodeUUID": "LOCAL_ATRIUM_ENTRANCE",
                  "text": "Welcome to the SPHR sample gallery.\nOur atrium combines architectural sketches and placeholder imagery so you can preview navigation and interface behavior.",
                  "secondaryText": "Use the Next button or click a floor marker to jump to other nodes.",
                  "pan": "left",
                  "zoom": 10,
                  "files": [],
                  "models": [],
                  "sounds": ["default"],
                  "rotation": { "polar": -5, "azimuth": 45 },
                  "viewMode": "FPV",
                  "targetType": "NODE",
                  "annotations": [],
                  "textPosition": "left"
                },
                {
                  "nodeUUID": "LOCAL_SCULPTURE_GALLERY",
                  "text": "The sculpture gallery stop showcases orbit transitions and UI toggles.\nActivate Orbit view to examine the dollhouse layout and explore freely.",
                  "secondaryText": "Tip: try switching to Explore mode to hide narration and move independently.",
                  "pan": "right",
                  "zoom": 35,
                  "files": [],
                  "models": [],
                  "sounds": ["default"],
                  "rotation": { "polar": -15, "azimuth": -30 },
                  "viewMode": "ORBIT",
                  "targetType": "NODE",
                  "annotations": [],
                  "textPosition": "right"
                },
                {
                  "nodeUUID": "LOCAL_BALCONY_OUTLOOK",
                  "text": "Finish your demo tour on the balcony outlook.\nFrom here you can restart the guided path or remain in free explore mode.",
                  "secondaryText": "When autoplay is enabled, narration will advance every few seconds.",
                  "pan": "left",
                  "zoom": 20,
                  "files": [],
                  "models": [],
                  "sounds": ["default"],
                  "rotation": { "polar": -20, "azimuth": 140 },
                  "viewMode": "FPV",
                  "targetType": "NODE",
                  "annotations": [],
                  "textPosition": "center"
                }
              ]
            }
          ],
          "sceneGraph": [],
          "annotationGraph": []
        }
      }
    </script>
  </body>
</html>
